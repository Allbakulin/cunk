"use strict";function shuffleArray(e){for(var r=e.length-1;r>0;r--){var a=Math.floor(Math.random()*(r+1)),n=e[r];e[r]=e[a],e[a]=n}return e}Handlebars.registerHelper("compare",function(e,r,a){if(arguments.length<3)throw new Error('Handlerbars Helper "compare" needs 2 parameters');var n=a.hash.operator||"==",t={"===":function(e,r){return e===r},"!=":function(e,r){return e!==r},"<":function(e,r){return r>e},">":function(e,r){return e>r},"<=":function(e,r){return r>=e},">=":function(e,r){return e>=r},"typeof":function(e,r){return typeof e===r}};if(!t[n])throw new Error('Handlerbars Helper "compare" doesnt know the operator '+n);var o=t[n](e,r);return o?a.fn(this):a.inverse(this)}),$.fn.removeClassRegex=function(e){return $(this).removeClass(function(r,a){return a.split(/\s+/).filter(function(r){return e.test(r)}).join(" ")})},$(function(){var e,r,a=$(".container"),n=$("#page-loader"),t=$(window),o=!1,i=$(".totop-trigger"),s=0;a.imagesLoaded({background:!0}).always(function(){$.when($.get("data/crew.json",function(a){e=shuffleArray(a);var n=e[Math.floor(Math.random()*e.length)];r=n.id})).then(function(){cube.init(e,r),setTimeout(function(){n.removeClass("step1").addClass("step2"),setTimeout(function(){$("body").removeClass("page-is-loading"),Waypoint.refreshAll()},1e3)},1500)})}).fail(function(){$("body").removeClass("page-is-loading"),n.remove()}),$(document).on("click",".totop-trigger",function(){var e=t.scrollTop();e=e>300?300:e,$("html, body").animate({scrollTop:0},e).promise().done(function(){a.removeClassRegex(/^ha-header--/).addClass("ha-header--sharp ha-header--large")})}),$(".ha-waypoint").each(function(){var e=$(this),r=e.data("animateDown"),n=e.data("animateUp");e.waypoint(function(e){o&&"down"===e&&r?(a.addClass("ha-header--"+r),a.removeClass("ha-header--"+n)):o&&"up"===e&&n&&(a.addClass("ha-header--"+n),a.removeClass("ha-header--"+r))},{offset:"100%"})}),t.on("orientationchange",function(){setTimeout(function(){i.trigger("click"),cube.resize()},1e3)}),t.resize(function(){var e=t.width();e!==s&&(s=e,cube.resize())}).trigger("resize"),t.on("hashchange",function(){var e=location.hash.substring(1);e=e.replace(/\//g,"");var r=t.scrollTop();r=r>300?300:r,$("html, body").animate({scrollTop:0},r).promise().done(function(){a.removeClassRegex(/^ha-header--/).addClass("ha-header--sharp ha-header--large"),setTimeout(function(){cube.flipTo(e)},300)})}).trigger("hashchange"),window.addEventListener("popstate",function(e){if(e.state&&""!==e.state){var r=t.scrollTop();r=r>300?300:r,$("html, body").animate({scrollTop:0},r).promise().done(function(){a.removeClassRegex(/^ha-header--/).addClass("ha-header--sharp ha-header--large"),setTimeout(function(){cube.flipTo(e.state)},300)})}}),o=!0});
